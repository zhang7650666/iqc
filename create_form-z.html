<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Page title -->
    <title>新建表单</title>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!--<link rel="shortcut icon" type="image/ico" href="favicon.ico" />-->

    <!-- Vendor styles -->
    <link rel="stylesheet" href="vendor/fontawesome/css/font-awesome.css" />
    <link rel="stylesheet" href="vendor/metisMenu/dist/metisMenu.css" />
    <link rel="stylesheet" href="vendor/animate.css/animate.css" />
    <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="vendor/sweetalert/lib/sweet-alert.css" />
    <link rel="stylesheet" href="vendor/toastr/build/toastr.min.css" />
    <!-- <link
      rel="stylesheet"
      href="vendor/datatables.net-bs/css/dataTables.bootstrap.min.css"
    /> -->

    <link
      rel="stylesheet"
      href="vendor/bootstrap-datepicker-master/dist/css/bootstrap-datepicker3.min.css"
    />
    <!-- <link
      rel="stylesheet"
      href="vendor/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css"
    /> -->
    <link
      rel="stylesheet"
      href="vendor/clockpicker/dist/bootstrap-clockpicker.min.css"
    />
    <link
      rel="stylesheet"
      href="vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css"
    />

    <!-- App styles -->
    <link
      rel="stylesheet"
      href="fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css"
    />
    <link rel="stylesheet" href="fonts/pe-icon-7-stroke/css/helper.css" />
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="styles/flex.css" />
  </head>
  <body class="fixed-navbar fixed-sidebar">
    <!--[if lt IE 7]>
      <p class="alert alert-danger">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->

    <!-- Header -->
    <div id="header">
      <div class="color-line"></div>
      <!-- 常屏 项目名 -->
      <div id="logo" class="light-version">
        <span> 材料检验客户端 </span>
      </div>

      <!--  小屏 顶部导航 -->
      <nav role="navigation">
        <div class="header-link hide-menu"><i class="fa fa-bars"></i></div>
        <div class="small-logo">
          <span class="text-primary">材料检验客户端</span>
        </div>
        <div class="mobile-menu">
          <button
            type="button"
            class="navbar-toggle mobile-menu-toggle"
            data-toggle="collapse"
            data-target="#mobile-collapse"
          >
            <i class="fa fa-chevron-down"></i>
          </button>
          <div class="collapse mobile-navbar" id="mobile-collapse">
            <ul class="nav navbar-nav">
              <!-- <li>
                <a class="" href="login.html">Login</a>
              </li> -->
              <li>
                <a type="button" class="btn btn-text logoutBtn">Logout</a>
              </li>
            </ul>
          </div>
        </div>
        <!-- 常屏 顶部导航 -->
        <div class="navbar-right">
          <ul class="nav navbar-nav no-borders">
            <li class="dropdown">
              <a type="button" class="btn btn-text logoutBtn">
                <i class="pe-7s-upload pe-rotate-90"></i>
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </div>

    <!-- Navigation -->
    <aside id="menu">
      <div id="navigation">
        <ul class="nav" id="side-menu"></ul>
      </div>
    </aside>

    <!-- Main Wrapper -->
    <div id="wrapper">
      <div class="content animate-panel">
        <div class="hpanel">
          <div class="panel-body">
            <ul id="unit-info-box" class="l-s-n line34"></ul>
          </div>
        </div>

        <!-- 见证记录 -->
        <div class="hpanel print-wp">
          <div class="panel-heading"></div>
          <div class="panel-body">
            <h3 class="txt-center p-b-lg">新建表单</h3>
            <form action="#" id="loginForm" class="form-horizontal label-right">
              <div class="row create-item"></div>
              <div class="p-t-md txt-center">
                <button type="button" class="btn btn-info">返回列表</button>
                <button type="submit" class="btn btn-primary m-l-lg">
                  新建表单
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Vendor scripts -->
    <script src="vendor/jquery/dist/jquery.min.js"></script>
    <script src="vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="vendor/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="vendor/jquery-flot/jquery.flot.js"></script>
    <script src="vendor/jquery-flot/jquery.flot.resize.js"></script>
    <script src="vendor/jquery-flot/jquery.flot.pie.js"></script>
    <script src="vendor/flot.curvedlines/curvedLines.js"></script>
    <script src="vendor/jquery.flot.spline/index.js"></script>
    <script src="vendor/metisMenu/dist/metisMenu.min.js"></script>
    <script src="vendor/iCheck/icheck.min.js"></script>
    <script src="vendor/peity/jquery.peity.min.js"></script>
    <script src="vendor/sparkline/index.js"></script>
    <script src="vendor/sweetalert/lib/sweet-alert.min.js"></script>
    <script src="vendor/toastr/build/toastr.min.js"></script>
    <script src="vendor/moment/moment.js"></script>
    <script src="vendor/bootstrap-datepicker-master/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="vendor/clockpicker/dist/bootstrap-clockpicker.min.js"></script>
    <script src="vendor/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <script src="vendor/jquery-validation/jquery.validate.min.js"></script>
    <!-- App scripts -->
    <script src="scripts/jquery.jqprint-0.3.js"></script>
    <script src="scripts/homer.js"></script>
    <script>
      // 解决打印报错
      jQuery.browser = {};
      (function () {
        jQuery.browser.msie = false;
        jQuery.browser.version = 0;
        if (navigator.userAgent.match(/MSIE ([0-9]+)./)) {
          jQuery.browser.msie = true;
          jQuery.browser.version = RegExp.$1;
        }
      })();
    </script>
    <script>
      getUnitDetail();
      //生成左侧列表
      createList &&
        createList(function () {
          queryObj = query2obj(window.location.href);
        });

      var formData = [
        {
          label: "使用部位",
          key: "usedPart",
          value: "111",
        },
        {
          label: "试件编号",
          key: "specimenNumber",
          value: "222",
        },
        {
          label: "样品名称",
          key: "sampleName",
          value: "333",
        },
        {
          label: "试件品种",
          key: "specimenType",
          value: "444",
        },
        {
          label: "规格型号(牌号)",
          key: "modelName",
          value: "555",
        },
        {
          label: "代表数量",
          key: "quantity",
          value: "666",
        },
        {
          label: "材料进厂时间",
          key: "entryTime",
          value: "777",
        },
        {
          label: "出厂编号",
          key: "factoryNumber",
          value: "888",
        },
        {
          label: "生产厂家",
          key: "factoryName",
          value: "999",
        },
        {
          label: "取样组数",
          key: "samplingQuantity",
          value: "101",
        },
        {
          label: "取样地点",
          key: "samplingAddress",
          value: "102",
        },
      ];
      // var formData = {
      //   usedPart:	'string', //	Y	使用部位
      //   specimenNumber:	'string', // 	Y	试件编号
      //   sampleName:	'string', //	Y	样品名称
      //   specimenType:	'string', //	Y	试件品种
      //   modelName: 'string', //	Y	规格型号(牌号)
      //   quantity:	'string', //	Y	代表数量
      //   entryTime:	'string', //	Y	材料进厂时间
      //   factoryNumber:	'string', //	Y	出厂编号
      //   factoryName:	'string', //	Y	生产厂家
      //   quantity:	'string', //	Y	代表数量
      //   samplingQuantity:	'string', //	Y	取样组数
      //   samplingAddress: 'string', //	Y	取样地点
      //   testStatus:	'int',//	Y	检验状态(0：见证，1：复试)
      //   oriTestNumber: 'string', //	N	原试验编号(testStatus=1时，需要提交)
      // }
      var formStr = "";
      var rules = {};
      var messages = {};
      formData.forEach(function (item) {
        formStr +=
          '<div class="form-group col-md-6 col-lg-6">\
          <label class="col-xs-4 control-label label-p7" for="' +
          item.key +
          '">' +
          item.label +
          '</label>\
          <div class="col-xs-8">\
            <input\
              type="text"\
              placeholder="请输入' +
          item.label +
          '"\
              required=""\
              value="' +
          item.value +
          '"\
              name="' +
          item.key +
          '"\
              class="form-control"\
            />\
            <div class="error-block-' +
          item.key +
          ' text-danger"></div>\
          </div>\
        </div>';
        rules[item.key] = { required: true };
        var errTips = item.label + "不能为空";
        messages[item.key] = { required: errTips };
      });
      var radioStr =
        '<div class="col-md-6 col-lg-6 txt-center">\
          <div class="radio col-xs-4"></div>\
          <div class="radio col-xs-3"><label> <input type="radio" checked value="0" id="optionsRadios1" name="testStatus"> 见证 </label></div>\
          <div class="radio col-xs-3"><label> <input type="radio" value="1" id="optionsRadios2" name="testStatus"> 复试 </label></div>\
      </div>';
      $(".create-item").html(formStr);
      $(".create-item").append(radioStr);
      // 提交校验
      $("#loginForm").validate({
        rules: rules,
        messages: messages,
        onfocusout: false,
        // focusCleanup: true, // 当未通过验证的元素获得焦点时,并移除错误提示 （避免和 focusInvalid.一起使用）
        submitHandler: function (form) {
          var formData = {};
          var t = $(form).serializeArray();
          for (var i = 0; i < t.length; i++) {
            if (t[i].name == "testStatus" && t[i].value == 1) {
              t.push({
                name: "oriTestNumber",
                value: 66666,
              });
            }
            formData[t[i].name] = t[i].value;
          }
          localStorage.setItem("form_style_query", JSON.stringify(formData));
          var queryObj = query2obj(window.location.href);
          window.location.href =
            "./tables_design-z.html?" + obj2query(queryObj);
        },
        errorPlacement: function (error, element) {
          var name = $(element).attr("name");
          $(".error-block-" + name).html(error);
        },
        errorElement: "span",
      });
    </script>
  </body>
</html>
